# What is it
Часть кода азбукера, выложена в учебных целях. Выложено как есть, на правах **песочницы хакера**. Не является ни примером хороших практик, ни образцом для подражания.

Работоспособность завязана на верстку libring и ozon. Скорее всего для запуска потребуется проанализировать код этих сайтов и внести изменения.

## book_retriever.rb 
Standalone приложение для перебора книг из Libring и вытаскивания каждой книги (если она есть) из Озона в базу rails приложения. Требует запуска в контексте rails приложения. 

```
rails runner -e development "BookRetriever.run"
```

Хранит текущий счетчик книг Libring в `#{Rails.root}/public/system/ozbooks/counter.txt`

## ozon_book_parser.rb 
Парсер книжки из ее озоновской страницы. С предустановленной структурой жанров и прописанными xpath для вытаскивания названия, фио авторов, обложки, жанра. Вытаскивание происходит методом `parse_book!`, если `state_valid?` то с этим экземпляром можно создавать, например новый `OzBook`.

## oz_book.rb 
Выделенная модель для хранения *озоновской книжки* (создается из экземпляра `OzonBookParser` методом  `self.create_from_ozon_book!`). *Озоновская книжка* — готовое к употреблению хранилище жанра, авторов, названия, обложки.

## author.rb 
Модель автора (используется здесь для разбора ФИО автора из строкового представления, см. методы класса).
